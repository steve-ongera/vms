# Generated by Django 5.2.11 on 2026-02-19 12:26

import django.contrib.auth.models
import django.contrib.auth.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='Estate',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(help_text='Short code e.g. GRN01', max_length=20, unique=True)),
                ('address', models.TextField()),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=100)),
                ('country', models.CharField(default='Kenya', max_length=100)),
                ('postal_code', models.CharField(blank=True, max_length=20)),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('logo', models.ImageField(blank=True, null=True, upload_to='estate/logos/')),
                ('contact_phone', models.CharField(blank=True, max_length=20)),
                ('contact_email', models.EmailField(blank=True, max_length=254)),
                ('website', models.URLField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('timezone', models.CharField(default='Africa/Nairobi', max_length=50)),
                ('settings', models.JSONField(blank=True, default=dict)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='RecurrenceRule',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('frequency', models.CharField(choices=[('DAILY', 'Daily'), ('WEEKLY', 'Weekly'), ('BIWEEKLY', 'Bi-Weekly'), ('MONTHLY', 'Monthly')], max_length=20)),
                ('days_of_week', models.JSONField(blank=True, default=list, help_text='e.g. ["MON","WED","FRI"]')),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, null=True)),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='SubscriptionPlan',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('max_units', models.PositiveIntegerField(blank=True, help_text='Null = unlimited', null=True)),
                ('max_users', models.PositiveIntegerField(blank=True, null=True)),
                ('max_devices', models.PositiveIntegerField(blank=True, null=True)),
                ('monthly_price', models.DecimalField(decimal_places=2, max_digits=10)),
                ('annual_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('features', models.JSONField(default=list, help_text='List of enabled feature flags')),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('username', models.CharField(error_messages={'unique': 'A user with that username already exists.'}, help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', max_length=150, unique=True, validators=[django.contrib.auth.validators.UnicodeUsernameValidator()], verbose_name='username')),
                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),
                ('email', models.EmailField(blank=True, max_length=254, verbose_name='email address')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('SUPERADMIN', 'Super Admin'), ('ESTATE_ADMIN', 'Estate Admin'), ('PROPERTY_MANAGER', 'Property Manager'), ('SECURITY', 'Security Staff'), ('RECEPTIONIST', 'Receptionist'), ('RESIDENT', 'Resident / Owner'), ('TENANT', 'Tenant'), ('STAFF', 'Support Staff'), ('CONTRACTOR', 'Contractor'), ('VISITOR', 'Visitor (self-service)')], default='VISITOR', max_length=20)),
                ('phone', models.CharField(blank=True, max_length=20)),
                ('profile_photo', models.ImageField(blank=True, null=True, upload_to='users/photos/')),
                ('national_id', models.CharField(blank=True, max_length=50)),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('is_verified', models.BooleanField(default=False)),
                ('verification_method', models.CharField(blank=True, choices=[('EMAIL', 'Email'), ('SMS', 'SMS'), ('MANUAL', 'Manual')], max_length=20)),
                ('push_token', models.TextField(blank=True, help_text='FCM / APNs push token')),
                ('language', models.CharField(default='en', max_length=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
                ('estate', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='users', to='main_application.estate')),
            ],
            options={
                'ordering': ['last_name', 'first_name'],
            },
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='EmergencyAlert',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('alert_type', models.CharField(choices=[('FIRE', 'Fire'), ('EVACUATION', 'Evacuation'), ('LOCKDOWN', 'Lockdown'), ('MEDICAL', 'Medical Emergency'), ('SECURITY', 'Security Threat'), ('NATURAL_DISASTER', 'Natural Disaster'), ('GENERAL', 'General Announcement')], max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('RESOLVED', 'Resolved'), ('DRILL', 'Drill / Test')], default='ACTIVE', max_length=20)),
                ('initiated_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('gate_lockdown', models.BooleanField(default=False, help_text='Lock all gates on alert')),
                ('mustering_point', models.CharField(blank=True, max_length=200)),
                ('initiated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='emergency_alerts', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Contractor',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('company_name', models.CharField(max_length=200)),
                ('contact_person', models.CharField(max_length=100)),
                ('phone', models.CharField(max_length=20)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('service_type', models.CharField(help_text='e.g. Plumbing, Electrical, Cleaning, Landscaping', max_length=100)),
                ('contract_start', models.DateField(blank=True, null=True)),
                ('contract_end', models.DateField(blank=True, null=True)),
                ('is_approved', models.BooleanField(default=False)),
                ('documents', models.JSONField(blank=True, default=list, help_text='List of document URLs (certificates, insurance, etc.)')),
                ('is_active', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('approved_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_contractors', to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contractors', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='CommonArea',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('area_type', models.CharField(choices=[('GYM', 'Gymnasium'), ('POOL', 'Swimming Pool'), ('CLUBHOUSE', 'Clubhouse'), ('PARKING', 'Parking'), ('LOBBY', 'Lobby'), ('ROOFTOP', 'Rooftop'), ('PLAYGROUND', 'Playground'), ('OTHER', 'Other')], max_length=20)),
                ('capacity', models.PositiveIntegerField(blank=True, null=True)),
                ('access_controlled', models.BooleanField(default=False)),
                ('description', models.TextField(blank=True)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='common_areas', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Block',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=10)),
                ('floors', models.PositiveIntegerField(default=1)),
                ('description', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='blocks', to='main_application.estate')),
            ],
            options={
                'unique_together': {('estate', 'code')},
            },
        ),
        migrations.CreateModel(
            name='Gate',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('gate_type', models.CharField(choices=[('MAIN_ENTRY', 'Main Entry'), ('MAIN_EXIT', 'Main Exit'), ('PEDESTRIAN', 'Pedestrian'), ('VEHICLE', 'Vehicle'), ('EMERGENCY', 'Emergency'), ('DELIVERY', 'Delivery'), ('SERVICE', 'Service/Staff')], max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('is_open', models.BooleanField(default=False, help_text='Real-time open/closed state')),
                ('is_24h', models.BooleanField(default=True)),
                ('operating_hours_start', models.TimeField(blank=True, null=True)),
                ('operating_hours_end', models.TimeField(blank=True, null=True)),
                ('requires_escort', models.BooleanField(default=False)),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('notes', models.TextField(blank=True)),
                ('block', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='gates', to='main_application.block')),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gates', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='AccessDevice',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('device_type', models.CharField(choices=[('FINGERPRINT_READER', 'Fingerprint Reader'), ('RFID_READER', 'RFID / Card Reader'), ('FACE_RECOGNITION', 'Face Recognition Camera'), ('QR_SCANNER', 'QR Code Scanner'), ('INTERCOM', 'Video Intercom'), ('KIOSK', 'Self-Service Kiosk'), ('BARRIER_CONTROLLER', 'Barrier/Gate Controller'), ('DOOR_CONTROLLER', 'Door Access Controller'), ('NFC_READER', 'NFC Reader'), ('PIN_PAD', 'PIN Keypad'), ('LICENSE_PLATE', 'License Plate Recognition'), ('BODY_TEMP', 'Body Temperature Scanner')], max_length=30)),
                ('name', models.CharField(max_length=100)),
                ('serial_number', models.CharField(blank=True, max_length=100, unique=True)),
                ('manufacturer', models.CharField(blank=True, max_length=100)),
                ('model', models.CharField(blank=True, max_length=100)),
                ('firmware_version', models.CharField(blank=True, max_length=50)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('mac_address', models.CharField(blank=True, max_length=17)),
                ('api_endpoint', models.URLField(blank=True, help_text='Device API URL')),
                ('api_key', models.CharField(blank=True, max_length=200)),
                ('status', models.CharField(choices=[('ONLINE', 'Online'), ('OFFLINE', 'Offline'), ('MAINTENANCE', 'Under Maintenance'), ('FAULT', 'Fault')], default='OFFLINE', max_length=20)),
                ('last_heartbeat', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('configuration', models.JSONField(blank=True, default=dict, help_text='Device-specific config (thresholds, sensitivity, etc.)')),
                ('installed_at', models.DateTimeField(blank=True, null=True)),
                ('last_maintenance', models.DateTimeField(blank=True, null=True)),
                ('next_maintenance', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='devices', to='main_application.estate')),
                ('gate', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='devices', to='main_application.gate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='NotificationTemplate',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('event_trigger', models.CharField(choices=[('VISITOR_ARRIVING', 'Visitor Arriving'), ('VISITOR_CHECKED_IN', 'Visitor Checked In'), ('VISITOR_CHECKED_OUT', 'Visitor Checked Out'), ('PRE_REG_CREATED', 'Pre-Registration Created'), ('ACCESS_DENIED', 'Access Denied'), ('BLACKLIST_MATCH', 'Blacklist Match'), ('VISIT_APPROVED', 'Visit Approved'), ('VISIT_EXPIRED', 'Visit Expired'), ('EMERGENCY', 'Emergency Alert'), ('DELIVERY', 'Delivery Arrived')], max_length=30)),
                ('channel', models.CharField(choices=[('SMS', 'SMS'), ('EMAIL', 'Email'), ('PUSH', 'Push Notification'), ('WHATSAPP', 'WhatsApp'), ('IN_APP', 'In-App')], max_length=20)),
                ('subject', models.CharField(blank=True, help_text='For email', max_length=200)),
                ('body', models.TextField(help_text='Supports {visitor_name}, {host_name}, {unit}, {time} placeholders')),
                ('is_active', models.BooleanField(default=True)),
                ('send_to_host', models.BooleanField(default=True)),
                ('send_to_visitor', models.BooleanField(default=False)),
                ('send_to_security', models.BooleanField(default=False)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notification_templates', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='ParkingSlot',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('slot_number', models.CharField(max_length=20)),
                ('slot_type', models.CharField(choices=[('RESIDENT', 'Resident'), ('VISITOR', 'Visitor'), ('DISABLED', 'Disabled'), ('VIP', 'VIP'), ('DELIVERY', 'Delivery')], default='RESIDENT', max_length=20)),
                ('is_occupied', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='parking_slots', to=settings.AUTH_USER_MODEL)),
                ('block', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.block')),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='parking_slots', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='SavedReport',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('filters', models.JSONField(blank=True, default=dict)),
                ('frequency', models.CharField(choices=[('DAILY', 'Daily'), ('WEEKLY', 'Weekly'), ('MONTHLY', 'Monthly')], max_length=20)),
                ('format', models.CharField(choices=[('PDF', 'PDF'), ('EXCEL', 'Excel'), ('CSV', 'CSV')], default='PDF', max_length=10)),
                ('last_sent', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='main_application.estate')),
                ('recipients', models.ManyToManyField(blank=True, related_name='subscribed_reports', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='SecurityStaffProfile',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('badge_number', models.CharField(max_length=30, unique=True)),
                ('shift', models.CharField(choices=[('MORNING', 'Morning (06:00–14:00)'), ('AFTERNOON', 'Afternoon (14:00–22:00)'), ('NIGHT', 'Night (22:00–06:00)'), ('ROTATING', 'Rotating')], default='MORNING', max_length=20)),
                ('is_supervisor', models.BooleanField(default=False)),
                ('agency', models.CharField(blank=True, help_text='Outsourced security agency', max_length=100)),
                ('assigned_gate', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_staff', to='main_application.gate')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='security_profile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='EstateSubscription',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('status', models.CharField(choices=[('TRIAL', 'Trial'), ('ACTIVE', 'Active'), ('SUSPENDED', 'Suspended'), ('CANCELLED', 'Cancelled'), ('EXPIRED', 'Expired')], default='TRIAL', max_length=20)),
                ('trial_ends', models.DateTimeField(blank=True, null=True)),
                ('billing_cycle_start', models.DateField(blank=True, null=True)),
                ('billing_cycle_end', models.DateField(blank=True, null=True)),
                ('auto_renew', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('estate', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='subscription', to='main_application.estate')),
                ('plan', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='main_application.subscriptionplan')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='ThirdPartyIntegration',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('integration_type', models.CharField(choices=[('SMS_GATEWAY', 'SMS Gateway'), ('EMAIL_PROVIDER', 'Email Provider'), ('PUSH_SERVICE', 'Push Notification Service'), ('WHATSAPP', 'WhatsApp Business'), ('CCTV', 'CCTV System'), ('ACCESS_CONTROL', 'Access Control System'), ('PROPERTY_MGMT', 'Property Management Software'), ('PAYMENT', 'Payment Gateway'), ('HR_SYSTEM', 'HR System')], max_length=30)),
                ('provider_name', models.CharField(help_text='e.g. Twilio, SendGrid, Paytm', max_length=100)),
                ('config', models.JSONField(default=dict, help_text='Provider-specific config (store API keys encrypted)')),
                ('is_active', models.BooleanField(default=True)),
                ('last_tested', models.DateTimeField(blank=True, null=True)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='integrations', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Unit',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('unit_number', models.CharField(help_text='e.g. A101, 4B', max_length=20)),
                ('floor', models.IntegerField(default=0)),
                ('unit_type', models.CharField(choices=[('APARTMENT', 'Apartment'), ('PENTHOUSE', 'Penthouse'), ('STUDIO', 'Studio'), ('OFFICE', 'Office'), ('RETAIL', 'Retail'), ('WAREHOUSE', 'Warehouse'), ('TOWNHOUSE', 'Townhouse')], default='APARTMENT', max_length=20)),
                ('bedrooms', models.PositiveIntegerField(blank=True, null=True)),
                ('size_sqm', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('is_occupied', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('block', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='units', to='main_application.block')),
            ],
            options={
                'ordering': ['block', 'floor', 'unit_number'],
                'unique_together': {('block', 'unit_number')},
            },
        ),
        migrations.CreateModel(
            name='ResidentProfile',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('move_in_date', models.DateField(blank=True, null=True)),
                ('move_out_date', models.DateField(blank=True, null=True)),
                ('lease_expiry', models.DateField(blank=True, null=True)),
                ('is_owner', models.BooleanField(default=False)),
                ('is_primary_contact', models.BooleanField(default=True)),
                ('emergency_contact_name', models.CharField(blank=True, max_length=100)),
                ('emergency_contact_phone', models.CharField(blank=True, max_length=20)),
                ('allow_visitor_self_checkin', models.BooleanField(default=True, help_text='Allow pre-registered visitors to self check-in via QR/kiosk')),
                ('max_active_visitors', models.PositiveIntegerField(default=5, help_text='Max simultaneous visitors allowed')),
                ('is_active', models.BooleanField(default=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='resident_profile', to=settings.AUTH_USER_MODEL)),
                ('unit', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='residents', to='main_application.unit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='RegisteredVehicle',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('vehicle_type', models.CharField(choices=[('CAR', 'Car'), ('SUV', 'SUV'), ('MOTORCYCLE', 'Motorcycle'), ('TRUCK', 'Truck'), ('VAN', 'Van'), ('BICYCLE', 'Bicycle'), ('OTHER', 'Other')], default='CAR', max_length=15)),
                ('make', models.CharField(blank=True, max_length=60)),
                ('model', models.CharField(blank=True, max_length=60)),
                ('color', models.CharField(blank=True, max_length=30)),
                ('license_plate', models.CharField(max_length=20)),
                ('sticker_number', models.CharField(blank=True, max_length=30)),
                ('is_active', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='vehicles', to=settings.AUTH_USER_MODEL)),
                ('unit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.unit')),
            ],
            options={
                'unique_together': {('license_plate', 'owner')},
            },
        ),
        migrations.CreateModel(
            name='PreRegistration',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('visitor_name', models.CharField(max_length=200)),
                ('visitor_phone', models.CharField(max_length=20)),
                ('visitor_email', models.EmailField(blank=True, max_length=254)),
                ('purpose', models.CharField(choices=[('PERSONAL', 'Personal Visit'), ('BUSINESS', 'Business'), ('DELIVERY', 'Delivery'), ('MAINTENANCE', 'Maintenance/Repair'), ('CONTRACTOR', 'Contractor'), ('EMERGENCY', 'Emergency'), ('INTERVIEW', 'Interview'), ('VIEWINGS', 'Property Viewing'), ('EVENT', 'Event/Party'), ('OTHER', 'Other')], default='PERSONAL', max_length=20)),
                ('expected_arrival', models.DateTimeField()),
                ('expected_departure', models.DateTimeField(blank=True, null=True)),
                ('qr_code_token', models.CharField(blank=True, max_length=100, unique=True)),
                ('otp_code', models.CharField(blank=True, max_length=10)),
                ('otp_expires_at', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('USED', 'Used'), ('EXPIRED', 'Expired'), ('CANCELLED', 'Cancelled')], default='PENDING', max_length=20)),
                ('allow_multiple_uses', models.BooleanField(default=False)),
                ('max_uses', models.PositiveIntegerField(default=1)),
                ('use_count', models.PositiveIntegerField(default=0)),
                ('notes', models.TextField(blank=True)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pre_registrations', to='main_application.estate')),
                ('host', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='pre_registrations', to=settings.AUTH_USER_MODEL)),
                ('recurrence_rule', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.recurrencerule')),
                ('unit', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='pre_registrations', to='main_application.unit')),
            ],
            options={
                'ordering': ['-expected_arrival'],
            },
        ),
        migrations.CreateModel(
            name='Delivery',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('delivery_type', models.CharField(choices=[('PARCEL', 'Parcel/Package'), ('FOOD', 'Food Delivery'), ('GROCERY', 'Grocery'), ('DOCUMENT', 'Document'), ('FURNITURE', 'Furniture/Large Item'), ('OTHER', 'Other')], default='PARCEL', max_length=20)),
                ('courier_name', models.CharField(blank=True, max_length=100)),
                ('courier_company', models.CharField(blank=True, max_length=100)),
                ('courier_phone', models.CharField(blank=True, max_length=20)),
                ('tracking_number', models.CharField(blank=True, max_length=100)),
                ('status', models.CharField(choices=[('EXPECTED', 'Expected'), ('ARRIVED', 'Arrived at Gate'), ('NOTIFIED', 'Resident Notified'), ('COLLECTING', 'Being Collected'), ('COLLECTED', 'Collected'), ('RETURNED', 'Returned to Sender'), ('STORED', 'In Storage')], default='ARRIVED', max_length=20)),
                ('arrived_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('collected_at', models.DateTimeField(blank=True, null=True)),
                ('collected_by_signature', models.ImageField(blank=True, null=True, upload_to='deliveries/signatures/')),
                ('photo', models.ImageField(blank=True, null=True, upload_to='deliveries/photos/')),
                ('storage_location', models.CharField(blank=True, max_length=100)),
                ('notes', models.TextField(blank=True)),
                ('received_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='received_deliveries', to=settings.AUTH_USER_MODEL)),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deliveries', to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deliveries', to='main_application.estate')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deliveries', to='main_application.unit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Visit',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('expected_arrival', models.DateTimeField(blank=True, null=True)),
                ('expected_departure', models.DateTimeField(blank=True, null=True)),
                ('actual_check_in', models.DateTimeField(blank=True, null=True)),
                ('actual_check_out', models.DateTimeField(blank=True, null=True)),
                ('check_in_method', models.CharField(choices=[('MANUAL', 'Manual by Security'), ('QR_CODE', 'QR Code Scan'), ('FINGERPRINT', 'Fingerprint'), ('FACE', 'Facial Recognition'), ('CARD', 'RFID Card'), ('OTP', 'OTP / PIN'), ('INTERCOM', 'Video Intercom'), ('KIOSK', 'Self-Service Kiosk'), ('API', 'API / Integration')], default='MANUAL', max_length=20)),
                ('check_out_method', models.CharField(blank=True, choices=[('MANUAL', 'Manual by Security'), ('QR_CODE', 'QR Code Scan'), ('FINGERPRINT', 'Fingerprint'), ('FACE', 'Facial Recognition'), ('CARD', 'RFID Card'), ('OTP', 'OTP / PIN'), ('INTERCOM', 'Video Intercom'), ('KIOSK', 'Self-Service Kiosk'), ('API', 'API / Integration')], max_length=20)),
                ('purpose', models.CharField(choices=[('PERSONAL', 'Personal Visit'), ('BUSINESS', 'Business'), ('DELIVERY', 'Delivery'), ('MAINTENANCE', 'Maintenance/Repair'), ('CONTRACTOR', 'Contractor'), ('EMERGENCY', 'Emergency'), ('INTERVIEW', 'Interview'), ('VIEWINGS', 'Property Viewing'), ('EVENT', 'Event/Party'), ('OTHER', 'Other')], default='PERSONAL', max_length=20)),
                ('purpose_detail', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending Approval'), ('APPROVED', 'Approved'), ('CHECKED_IN', 'Checked In'), ('CHECKED_OUT', 'Checked Out'), ('DENIED', 'Access Denied'), ('EXPIRED', 'Expired'), ('CANCELLED', 'Cancelled'), ('NO_SHOW', 'No Show')], default='PENDING', max_length=20)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('denial_reason', models.TextField(blank=True)),
                ('number_of_visitors', models.PositiveIntegerField(default=1)),
                ('notes', models.TextField(blank=True)),
                ('is_recurring', models.BooleanField(default=False)),
                ('check_in_photo', models.ImageField(blank=True, null=True, upload_to='visits/photos/')),
                ('check_out_photo', models.ImageField(blank=True, null=True, upload_to='visits/photos/')),
                ('host_rating', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('visitor_rating', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_visits', to=settings.AUTH_USER_MODEL)),
                ('check_in_gate', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='check_in_visits', to='main_application.gate')),
                ('check_out_gate', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='check_out_visits', to='main_application.gate')),
                ('checked_in_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='checked_in_visits', to=settings.AUTH_USER_MODEL)),
                ('checked_out_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='checked_out_visits', to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='visits', to='main_application.estate')),
                ('host', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hosted_visits', to=settings.AUTH_USER_MODEL)),
                ('pre_registration', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='visits', to='main_application.preregistration')),
                ('recurrence_rule', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.recurrencerule')),
                ('unit', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='visits', to='main_application.unit')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ParkingSession',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('vehicle_plate', models.CharField(max_length=20)),
                ('entry_time', models.DateTimeField(default=django.utils.timezone.now)),
                ('exit_time', models.DateTimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('slot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sessions', to='main_application.parkingslot')),
                ('vehicle', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.registeredvehicle')),
                ('visit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('channel', models.CharField(max_length=20)),
                ('subject', models.CharField(blank=True, max_length=200)),
                ('message', models.TextField()),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('SENT', 'Sent'), ('DELIVERED', 'Delivered'), ('FAILED', 'Failed'), ('READ', 'Read')], default='PENDING', max_length=20)),
                ('sent_at', models.DateTimeField(blank=True, null=True)),
                ('delivered_at', models.DateTimeField(blank=True, null=True)),
                ('read_at', models.DateTimeField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True)),
                ('external_id', models.CharField(blank=True, help_text='Provider message ID', max_length=200)),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to=settings.AUTH_USER_MODEL)),
                ('template', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.notificationtemplate')),
                ('visit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visit')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AccessCard',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('card_number', models.CharField(max_length=100, unique=True)),
                ('card_type', models.CharField(choices=[('RFID_125KHZ', 'RFID 125kHz (EM4100)'), ('RFID_13MHZ', 'RFID 13.56MHz (Mifare)'), ('NFC', 'NFC'), ('SMART_CARD', 'Smart Card (Contact)'), ('BARCODE', 'Barcode Card'), ('QR_PHYSICAL', 'Physical QR Card')], default='RFID_13MHZ', max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('SUSPENDED', 'Suspended'), ('LOST', 'Reported Lost'), ('EXPIRED', 'Expired'), ('RETURNED', 'Returned')], default='ACTIVE', max_length=20)),
                ('issued_at', models.DateTimeField(auto_now_add=True)),
                ('valid_from', models.DateTimeField(default=django.utils.timezone.now)),
                ('valid_until', models.DateTimeField(blank=True, null=True)),
                ('is_temporary', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('issued_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='issued_cards', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cards', to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cards', to='main_application.estate')),
                ('allowed_gates', models.ManyToManyField(blank=True, to='main_application.gate')),
                ('visit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cards', to='main_application.visit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Visitor',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('first_name', models.CharField(max_length=100)),
                ('last_name', models.CharField(max_length=100)),
                ('phone', models.CharField(max_length=20)),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('gender', models.CharField(blank=True, choices=[('M', 'Male'), ('F', 'Female'), ('O', 'Other'), ('N', 'Prefer not to say')], max_length=1)),
                ('photo', models.ImageField(blank=True, null=True, upload_to='visitors/photos/')),
                ('id_type', models.CharField(blank=True, choices=[('NATIONAL_ID', 'National ID'), ('PASSPORT', 'Passport'), ('DRIVING_LICENSE', 'Driving License'), ('WORK_PERMIT', 'Work Permit'), ('STUDENT_ID', 'Student ID'), ('OTHER', 'Other')], max_length=30)),
                ('id_number', models.CharField(blank=True, max_length=60)),
                ('id_scan_front', models.ImageField(blank=True, null=True, upload_to='visitors/id_scans/')),
                ('id_scan_back', models.ImageField(blank=True, null=True, upload_to='visitors/id_scans/')),
                ('id_verified', models.BooleanField(default=False)),
                ('id_verified_at', models.DateTimeField(blank=True, null=True)),
                ('fingerprint_template', models.BinaryField(blank=True, null=True)),
                ('face_encoding', models.JSONField(blank=True, help_text='128-d face embedding vector', null=True)),
                ('company', models.CharField(blank=True, max_length=100)),
                ('nationality', models.CharField(blank=True, max_length=60)),
                ('is_flagged', models.BooleanField(default=False)),
                ('flag_reason', models.TextField(blank=True)),
                ('data_consent_given', models.BooleanField(default=False)),
                ('data_consent_at', models.DateTimeField(blank=True, null=True)),
                ('nda_signed', models.BooleanField(default=False)),
                ('id_verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_visitors', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['last_name', 'first_name'],
            },
        ),
        migrations.AddField(
            model_name='visit',
            name='accompanying_visitors',
            field=models.ManyToManyField(blank=True, related_name='accompanying_visits', to='main_application.visitor'),
        ),
        migrations.AddField(
            model_name='visit',
            name='visitor',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='visits', to='main_application.visitor'),
        ),
        migrations.AddField(
            model_name='preregistration',
            name='visitor',
            field=models.ForeignKey(blank=True, help_text='Linked once visitor is identified on arrival', null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visitor'),
        ),
        migrations.CreateModel(
            name='Incident',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('incident_type', models.CharField(choices=[('UNAUTHORIZED_ACCESS', 'Unauthorized Access'), ('TAILGATE', 'Tailgating'), ('THEFT', 'Theft'), ('VANDALISM', 'Vandalism'), ('ASSAULT', 'Assault'), ('SUSPICIOUS_PERSON', 'Suspicious Person'), ('FIRE', 'Fire'), ('MEDICAL', 'Medical Emergency'), ('NOISE', 'Noise Complaint'), ('PARKING', 'Parking Violation'), ('OTHER', 'Other')], max_length=30)),
                ('severity', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('CRITICAL', 'Critical')], default='MEDIUM', max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('occurred_at', models.DateTimeField()),
                ('status', models.CharField(choices=[('OPEN', 'Open'), ('INVESTIGATING', 'Investigating'), ('RESOLVED', 'Resolved'), ('ESCALATED', 'Escalated'), ('CLOSED', 'Closed')], default='OPEN', max_length=20)),
                ('resolution_notes', models.TextField(blank=True)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('photos', models.JSONField(blank=True, default=list)),
                ('cctv_reference', models.CharField(blank=True, max_length=200)),
                ('police_report_number', models.CharField(blank=True, max_length=100)),
                ('is_police_notified', models.BooleanField(default=False)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_incidents', to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='incidents', to='main_application.estate')),
                ('gate', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.gate')),
                ('reported_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reported_incidents', to=settings.AUTH_USER_MODEL)),
                ('unit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.unit')),
                ('visit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visit')),
                ('visitor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visitor')),
            ],
            options={
                'ordering': ['-occurred_at'],
            },
        ),
        migrations.CreateModel(
            name='EvacuationRecord',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('is_accounted', models.BooleanField(default=False)),
                ('accounted_at', models.DateTimeField(blank=True, null=True)),
                ('mustering_point', models.CharField(blank=True, max_length=200)),
                ('notes', models.TextField(blank=True)),
                ('alert', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evacuations', to='main_application.emergencyalert')),
                ('person', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('visitor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visitor')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Blacklist',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('id_number', models.CharField(blank=True, max_length=60)),
                ('phone', models.CharField(blank=True, max_length=20)),
                ('name', models.CharField(blank=True, max_length=200)),
                ('photo', models.ImageField(blank=True, null=True, upload_to='blacklist/photos/')),
                ('severity', models.CharField(choices=[('LOW', 'Low – Monitor Only'), ('MEDIUM', 'Medium – Alert Security'), ('HIGH', 'High – Deny Access'), ('CRITICAL', 'Critical – Alert Police')], default='HIGH', max_length=20)),
                ('reason', models.TextField()),
                ('incident_date', models.DateField(blank=True, null=True)),
                ('valid_until', models.DateField(blank=True, help_text='Null = permanent ban', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('added_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='blacklists', to='main_application.estate')),
                ('visitor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='blacklist_entries', to='main_application.visitor')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='BiometricTemplate',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('biometric_type', models.CharField(choices=[('FINGERPRINT', 'Fingerprint'), ('FACE', 'Face'), ('IRIS', 'Iris'), ('PALM', 'Palm Vein')], max_length=20)),
                ('template_data', models.BinaryField(help_text='Encrypted biometric template blob')),
                ('quality_score', models.FloatField(blank=True, help_text='0.0 – 1.0 quality score', null=True)),
                ('finger_index', models.PositiveSmallIntegerField(blank=True, help_text='0=right thumb, 1=right index, ..., 9=left pinky', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('device', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.accessdevice')),
                ('enrolled_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='enrolled_biometrics', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='biometrics', to=settings.AUTH_USER_MODEL)),
                ('visitor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='biometrics', to='main_application.visitor')),
            ],
        ),
        migrations.CreateModel(
            name='AccessEvent',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('event_type', models.CharField(choices=[('GRANTED', 'Access Granted'), ('DENIED', 'Access Denied'), ('TAILGATE', 'Tailgate Detected'), ('DOOR_FORCED', 'Door Forced Open'), ('DOOR_HELD', 'Door Held Open'), ('ALARM', 'Alarm Triggered'), ('CARD_UNKNOWN', 'Unknown Card'), ('BIOMETRIC_FAIL', 'Biometric Failure'), ('OFFLINE_GRANT', 'Offline Grant')], max_length=20)),
                ('event_time', models.DateTimeField(default=django.utils.timezone.now)),
                ('direction', models.CharField(blank=True, choices=[('IN', 'Entry'), ('OUT', 'Exit')], max_length=3)),
                ('raw_data', models.JSONField(blank=True, default=dict, help_text='Raw payload from device SDK')),
                ('snapshot', models.ImageField(blank=True, null=True, upload_to='events/snapshots/')),
                ('is_acknowledged', models.BooleanField(default=False)),
                ('card', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.accesscard')),
                ('device', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='events', to='main_application.accessdevice')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('gate', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.gate')),
                ('visit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visit')),
                ('visitor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visitor')),
            ],
            options={
                'ordering': ['-event_time'],
            },
        ),
        migrations.AddField(
            model_name='accesscard',
            name='visitor',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cards', to='main_application.visitor'),
        ),
        migrations.CreateModel(
            name='VisitorBadge',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('badge_type', models.CharField(choices=[('PRINTED', 'Printed Badge'), ('DIGITAL', 'Digital / QR Badge'), ('STICKER', 'Sticker')], default='PRINTED', max_length=20)),
                ('badge_number', models.CharField(max_length=30, unique=True)),
                ('printed_at', models.DateTimeField(blank=True, null=True)),
                ('qr_data', models.TextField(blank=True)),
                ('color_code', models.CharField(blank=True, help_text='Color to indicate visitor type (hex e.g. #FF0000)', max_length=7)),
                ('is_returned', models.BooleanField(default=False)),
                ('returned_at', models.DateTimeField(blank=True, null=True)),
                ('printed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='printed_badges', to=settings.AUTH_USER_MODEL)),
                ('visit', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='badge', to='main_application.visit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='VisitorDocument',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('document_type', models.CharField(choices=[('NDA', 'Non-Disclosure Agreement'), ('HEALTH_DECLARATION', 'Health Declaration'), ('TERMS', 'Terms & Conditions'), ('INDEMNITY', 'Indemnity Form'), ('CUSTOM', 'Custom')], max_length=30)),
                ('template_url', models.URLField(blank=True)),
                ('signed_document', models.FileField(blank=True, null=True, upload_to='documents/signed/')),
                ('is_signed', models.BooleanField(default=False)),
                ('signed_at', models.DateTimeField(blank=True, null=True)),
                ('signature_image', models.ImageField(blank=True, null=True, upload_to='documents/signatures/')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='visitor_documents', to='main_application.estate')),
                ('visit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='main_application.visit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='VisitorFeedback',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('rating', models.PositiveSmallIntegerField(help_text='1–5 stars')),
                ('comment', models.TextField(blank=True)),
                ('is_anonymous', models.BooleanField(default=False)),
                ('submitted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('visit', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='feedback', to='main_application.visit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='VisitorVehicle',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('license_plate', models.CharField(max_length=20)),
                ('vehicle_type', models.CharField(choices=[('CAR', 'Car'), ('SUV', 'SUV'), ('MOTORCYCLE', 'Motorcycle'), ('TRUCK', 'Truck'), ('VAN', 'Van'), ('BICYCLE', 'Bicycle'), ('OTHER', 'Other')], default='CAR', max_length=15)),
                ('make', models.CharField(blank=True, max_length=60)),
                ('model', models.CharField(blank=True, max_length=60)),
                ('color', models.CharField(blank=True, max_length=30)),
                ('lpr_captured', models.BooleanField(default=False, help_text='Captured by License Plate Recognition camera')),
                ('lpr_image', models.ImageField(blank=True, null=True, upload_to='vehicles/lpr/')),
                ('visit', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='vehicle', to='main_application.visit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Watchlist',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(blank=True, max_length=200)),
                ('phone', models.CharField(blank=True, max_length=20)),
                ('reason', models.TextField()),
                ('alert_message', models.TextField(help_text='Message shown to security on match')),
                ('is_active', models.BooleanField(default=True)),
                ('added_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='watchlists', to='main_application.estate')),
                ('visitor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.visitor')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='WebhookEndpoint',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('url', models.URLField()),
                ('secret_key', models.CharField(help_text='HMAC secret for payload signing', max_length=200)),
                ('subscribed_events', models.JSONField(default=list)),
                ('is_active', models.BooleanField(default=True)),
                ('timeout_seconds', models.PositiveSmallIntegerField(default=10)),
                ('retry_attempts', models.PositiveSmallIntegerField(default=3)),
                ('description', models.TextField(blank=True)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='webhooks', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='WebhookDelivery',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('event', models.CharField(max_length=50)),
                ('payload', models.JSONField()),
                ('response_status', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('response_body', models.TextField(blank=True)),
                ('duration_ms', models.PositiveIntegerField(blank=True, null=True)),
                ('success', models.BooleanField(default=False)),
                ('attempt_number', models.PositiveSmallIntegerField(default=1)),
                ('endpoint', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='deliveries', to='main_application.webhookendpoint')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='WorkOrder',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('status', models.CharField(choices=[('SCHEDULED', 'Scheduled'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled'), ('ON_HOLD', 'On Hold')], default='SCHEDULED', max_length=20)),
                ('scheduled_start', models.DateTimeField()),
                ('scheduled_end', models.DateTimeField()),
                ('actual_start', models.DateTimeField(blank=True, null=True)),
                ('actual_end', models.DateTimeField(blank=True, null=True)),
                ('requires_unit_access', models.BooleanField(default=False)),
                ('resident_approved', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('assigned_workers', models.ManyToManyField(blank=True, related_name='work_orders', to=settings.AUTH_USER_MODEL)),
                ('contractor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='work_orders', to='main_application.contractor')),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='work_orders', to='main_application.estate')),
                ('unit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.unit')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Zone',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('minimum_access_level', models.PositiveSmallIntegerField(choices=[(1, 'Public'), (2, 'Visitor (escorted)'), (3, 'Resident'), (4, 'Staff'), (5, 'Security'), (6, 'Admin')], default=3)),
                ('is_active', models.BooleanField(default=True)),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='zones', to='main_application.estate')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.AddField(
            model_name='gate',
            name='zone',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.zone'),
        ),
        migrations.CreateModel(
            name='AccessPermission',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('permission_type', models.CharField(choices=[('PERMANENT', 'Permanent'), ('TEMPORARY', 'Temporary'), ('SCHEDULED', 'Scheduled')], default='PERMANENT', max_length=20)),
                ('valid_from', models.DateTimeField(default=django.utils.timezone.now)),
                ('valid_until', models.DateTimeField(blank=True, null=True)),
                ('allowed_days', models.JSONField(default=list, help_text='e.g. ["MON","TUE","WED","THU","FRI"]')),
                ('allowed_time_start', models.TimeField(blank=True, null=True)),
                ('allowed_time_end', models.TimeField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('reason', models.TextField(blank=True)),
                ('granted_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='granted_permissions', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='access_permissions', to=settings.AUTH_USER_MODEL)),
                ('gate', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.gate')),
                ('zone', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.zone')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.AddField(
            model_name='accesscard',
            name='allowed_zones',
            field=models.ManyToManyField(blank=True, to='main_application.zone'),
        ),
        migrations.CreateModel(
            name='DailyReport',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('date', models.DateField()),
                ('total_visitors', models.PositiveIntegerField(default=0)),
                ('total_check_ins', models.PositiveIntegerField(default=0)),
                ('total_check_outs', models.PositiveIntegerField(default=0)),
                ('denied_access', models.PositiveIntegerField(default=0)),
                ('blacklist_alerts', models.PositiveIntegerField(default=0)),
                ('avg_visit_duration_minutes', models.FloatField(blank=True, null=True)),
                ('peak_hour', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('total_deliveries', models.PositiveIntegerField(default=0)),
                ('total_incidents', models.PositiveIntegerField(default=0)),
                ('stats_json', models.JSONField(blank=True, default=dict, help_text='Flexible extra stats')),
                ('estate', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='daily_reports', to='main_application.estate')),
            ],
            options={
                'unique_together': {('estate', 'date')},
            },
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action', models.CharField(choices=[('CREATE', 'Created'), ('UPDATE', 'Updated'), ('DELETE', 'Deleted'), ('LOGIN', 'Login'), ('LOGOUT', 'Logout'), ('APPROVE', 'Approved'), ('DENY', 'Denied'), ('CHECKIN', 'Checked In'), ('CHECKOUT', 'Checked Out'), ('CARD_ISSUED', 'Card Issued'), ('CARD_REVOKED', 'Card Revoked'), ('BLACKLIST_ADD', 'Added to Blacklist'), ('EXPORT', 'Data Exported')], max_length=30)),
                ('model_name', models.CharField(help_text='Django model name', max_length=100)),
                ('object_id', models.CharField(blank=True, max_length=100)),
                ('description', models.TextField()),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('before_state', models.JSONField(blank=True, null=True)),
                ('after_state', models.JSONField(blank=True, null=True)),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('estate', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='main_application.estate')),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['model_name', 'object_id'], name='main_applic_model_n_f6da06_idx')],
            },
        ),
        migrations.CreateModel(
            name='SystemSetting',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('key', models.CharField(max_length=100)),
                ('value', models.TextField()),
                ('data_type', models.CharField(choices=[('str', 'String'), ('int', 'Integer'), ('bool', 'Boolean'), ('json', 'JSON')], default='str', max_length=20)),
                ('description', models.TextField(blank=True)),
                ('is_public', models.BooleanField(default=False)),
                ('estate', models.ForeignKey(blank=True, help_text='Null = global platform setting', null=True, on_delete=django.db.models.deletion.CASCADE, to='main_application.estate')),
            ],
            options={
                'unique_together': {('estate', 'key')},
            },
        ),
        migrations.AddIndex(
            model_name='visitor',
            index=models.Index(fields=['phone'], name='main_applic_phone_704f4c_idx'),
        ),
        migrations.AddIndex(
            model_name='visitor',
            index=models.Index(fields=['id_number'], name='main_applic_id_numb_a37c2d_idx'),
        ),
        migrations.AddIndex(
            model_name='visit',
            index=models.Index(fields=['status', 'estate'], name='main_applic_status_ff361c_idx'),
        ),
        migrations.AddIndex(
            model_name='visit',
            index=models.Index(fields=['actual_check_in'], name='main_applic_actual__aebfae_idx'),
        ),
        migrations.AddIndex(
            model_name='visit',
            index=models.Index(fields=['visitor', 'status'], name='main_applic_visitor_ab0f1c_idx'),
        ),
        migrations.AddConstraint(
            model_name='biometrictemplate',
            constraint=models.CheckConstraint(condition=models.Q(('user__isnull', False), ('visitor__isnull', False), _connector='OR'), name='biometric_must_have_owner'),
        ),
        migrations.AddIndex(
            model_name='accessevent',
            index=models.Index(fields=['event_time', 'gate'], name='main_applic_event_t_6e2ec7_idx'),
        ),
        migrations.AddIndex(
            model_name='accessevent',
            index=models.Index(fields=['event_type'], name='main_applic_event_t_200e3f_idx'),
        ),
    ]
